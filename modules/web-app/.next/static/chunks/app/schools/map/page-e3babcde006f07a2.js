(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[921],{19946:(e,r,t)=>{"use strict";t.d(r,{A:()=>i});var s=t(12115);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,s.forwardRef)((e,r)=>{let{color:t="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:c="",children:d,iconNode:u,...m}=e;return(0,s.createElement)("svg",{ref:r,...n,width:a,height:a,stroke:t,strokeWidth:i?24*Number(o)/Number(a):o,className:l("lucide",c),...m},[...u.map(e=>{let[r,t]=e;return(0,s.createElement)(r,t)}),...Array.isArray(d)?d:[d]])}),i=(e,r)=>{let t=(0,s.forwardRef)((t,n)=>{let{className:i,...c}=t;return(0,s.createElement)(o,{ref:n,iconNode:r,className:l("lucide-".concat(a(e)),i),...c})});return t.displayName="".concat(e),t}},47924:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(19946).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},71295:(e,r,t)=>{"use strict";t.d(r,{default:()=>o});var s=t(95155),a=t(12115),l=t(47924);function n(e){let{onSelectSchool:r}=e,[t,n]=(0,a.useState)(""),[o,i]=(0,a.useState)([]),[c,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),h=(0,a.useRef)(null);return(0,a.useEffect)(()=>{function e(e){h.current&&!h.current.contains(e.target)&&d(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.useEffect)(()=>{let e=setTimeout(async()=>{if(t.length<2){i([]);return}m(!0);try{let e=await fetch("http://localhost:8000/api/open-data/schools"),r=(await e.json()).features.filter(e=>{var r;return e.properties.name.toLowerCase().includes(t.toLowerCase())||(null===(r=e.properties.address)||void 0===r?void 0:r.toLowerCase().includes(t.toLowerCase()))});i(r.slice(0,5)),d(!0)}catch(e){console.error("Search error:",e)}finally{m(!1)}},300);return()=>clearTimeout(e)},[t]),(0,s.jsxs)("div",{ref:h,className:"relative w-full max-w-md",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(l.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,s.jsx)("input",{type:"text",value:t,onChange:e=>n(e.target.value),placeholder:"T\xecm kiếm trường học...",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white shadow-sm",onFocus:()=>t.length>=2&&d(!0)}),u&&(0,s.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:(0,s.jsx)("div",{className:"animate-spin h-4 w-4 border-2 border-green-500 border-t-transparent rounded-full"})})]}),c&&o.length>0&&(0,s.jsx)("div",{className:"absolute w-full mt-1 bg-white rounded-lg shadow-lg border border-gray-100 max-h-60 overflow-auto z-50",children:o.map(e=>(0,s.jsxs)("button",{onClick:()=>{r(e),n(e.properties.name),d(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-50 transition-colors border-b last:border-0 border-gray-50",children:[(0,s.jsx)("div",{className:"font-medium text-sm text-gray-900",children:e.properties.name}),(0,s.jsx)("div",{className:"text-xs text-gray-500 truncate",children:e.properties.address})]},e.properties.id))})]})}function o(){return(0,s.jsxs)("div",{className:"relative flex h-full w-full flex-col items-center justify-center rounded-lg border border-dashed border-gray-300 bg-white/60 p-6 text-sm text-gray-600",children:[(0,s.jsx)("p",{className:"mb-3 font-semibold text-gray-700",children:"SchoolMap (Mapbox) đ\xe3 được tắt."}),(0,s.jsxs)("p",{className:"mb-4 text-xs text-gray-500",children:["Vui l\xf2ng sử dụng bản đồ ch\xednh tại"," ",(0,s.jsx)("a",{href:"/map",className:"text-success-600 underline",children:"/map"}),"."]}),(0,s.jsx)("div",{className:"w-full max-w-xs sm:max-w-md",children:(0,s.jsx)(n,{onSelectSchool:()=>{}})})]})}},74103:(e,r,t)=>{Promise.resolve().then(t.bind(t,71295))}},e=>{var r=r=>e(e.s=r);e.O(0,[8441,1684,7358],()=>r(74103)),_N_E=e.O()}]);