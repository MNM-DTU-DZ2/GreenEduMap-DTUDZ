(()=>{var e={};e.id=990,e.ids=[990],e.modules={163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return a}});let a=r(71042).unstable_rethrow;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},871:(e,t,r)=>{"use strict";r.d(t,{default:()=>P});var a=r(60687),n=r(43210),i=r(58869),s=r(62688);let o=(0,s.A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var l=r(35780),d=r(47138);function u(e,t){let r=(0,d.a)(e),a=(0,d.a)(t),n=r.getTime()-a.getTime();return n<0?-1:n>0?1:n}var c=r(11392),h=r(20755),m=r(9903),g=r(79943);let f={lessThanXSeconds:{one:"dưới 1 gi\xe2y",other:"dưới {{count}} gi\xe2y"},xSeconds:{one:"1 gi\xe2y",other:"{{count}} gi\xe2y"},halfAMinute:"nửa ph\xfat",lessThanXMinutes:{one:"dưới 1 ph\xfat",other:"dưới {{count}} ph\xfat"},xMinutes:{one:"1 ph\xfat",other:"{{count}} ph\xfat"},aboutXHours:{one:"khoảng 1 giờ",other:"khoảng {{count}} giờ"},xHours:{one:"1 giờ",other:"{{count}} giờ"},xDays:{one:"1 ng\xe0y",other:"{{count}} ng\xe0y"},aboutXWeeks:{one:"khoảng 1 tuần",other:"khoảng {{count}} tuần"},xWeeks:{one:"1 tuần",other:"{{count}} tuần"},aboutXMonths:{one:"khoảng 1 th\xe1ng",other:"khoảng {{count}} th\xe1ng"},xMonths:{one:"1 th\xe1ng",other:"{{count}} th\xe1ng"},aboutXYears:{one:"khoảng 1 năm",other:"khoảng {{count}} năm"},xYears:{one:"1 năm",other:"{{count}} năm"},overXYears:{one:"hơn 1 năm",other:"hơn {{count}} năm"},almostXYears:{one:"gần 1 năm",other:"gần {{count}} năm"}};var p=r(96784);let x={date:(0,p.k)({formats:{full:"EEEE, 'ng\xe0y' d MMMM 'năm' y",long:"'ng\xe0y' d MMMM 'năm' y",medium:"d MMM 'năm' y",short:"dd/MM/y"},defaultWidth:"full"}),time:(0,p.k)({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:(0,p.k)({formats:{full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})},b={lastWeek:"eeee 'tuần trước v\xe0o l\xfac' p",yesterday:"'h\xf4m qua v\xe0o l\xfac' p",today:"'h\xf4m nay v\xe0o l\xfac' p",tomorrow:"'ng\xe0y mai v\xe0o l\xfac' p",nextWeek:"eeee 'tới v\xe0o l\xfac' p",other:"P"};var v=r(94758);let y={ordinalNumber:(e,t)=>{let r=Number(e),a=t?.unit;if("quarter"===a)switch(r){case 1:return"I";case 2:return"II";case 3:return"III";case 4:return"IV"}else if("day"===a)switch(r){case 1:return"thứ 2";case 2:return"thứ 3";case 3:return"thứ 4";case 4:return"thứ 5";case 5:return"thứ 6";case 6:return"thứ 7";case 7:return"chủ nhật"}else if("week"===a)return 1===r?"thứ nhất":"thứ "+r;else if("dayOfYear"===a)return 1===r?"đầu ti\xean":"thứ "+r;return String(r)},era:(0,v.o)({values:{narrow:["TCN","SCN"],abbreviated:["trước CN","sau CN"],wide:["trước C\xf4ng Nguy\xean","sau C\xf4ng Nguy\xean"]},defaultWidth:"wide"}),quarter:(0,v.o)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["Qu\xfd 1","Qu\xfd 2","Qu\xfd 3","Qu\xfd 4"]},defaultWidth:"wide",formattingValues:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["qu\xfd I","qu\xfd II","qu\xfd III","qu\xfd IV"]},defaultFormattingWidth:"wide",argumentCallback:e=>e-1}),month:(0,v.o)({values:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["Thg 1","Thg 2","Thg 3","Thg 4","Thg 5","Thg 6","Thg 7","Thg 8","Thg 9","Thg 10","Thg 11","Thg 12"],wide:["Th\xe1ng Một","Th\xe1ng Hai","Th\xe1ng Ba","Th\xe1ng Tư","Th\xe1ng Năm","Th\xe1ng S\xe1u","Th\xe1ng Bảy","Th\xe1ng T\xe1m","Th\xe1ng Ch\xedn","Th\xe1ng Mười","Th\xe1ng Mười Một","Th\xe1ng Mười Hai"]},defaultWidth:"wide",formattingValues:{narrow:["01","02","03","04","05","06","07","08","09","10","11","12"],abbreviated:["thg 1","thg 2","thg 3","thg 4","thg 5","thg 6","thg 7","thg 8","thg 9","thg 10","thg 11","thg 12"],wide:["th\xe1ng 01","th\xe1ng 02","th\xe1ng 03","th\xe1ng 04","th\xe1ng 05","th\xe1ng 06","th\xe1ng 07","th\xe1ng 08","th\xe1ng 09","th\xe1ng 10","th\xe1ng 11","th\xe1ng 12"]},defaultFormattingWidth:"wide"}),day:(0,v.o)({values:{narrow:["CN","T2","T3","T4","T5","T6","T7"],short:["CN","Th 2","Th 3","Th 4","Th 5","Th 6","Th 7"],abbreviated:["CN","Thứ 2","Thứ 3","Thứ 4","Thứ 5","Thứ 6","Thứ 7"],wide:["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ S\xe1u","Thứ Bảy"]},defaultWidth:"wide"}),dayPeriod:(0,v.o)({values:{narrow:{am:"am",pm:"pm",midnight:"nửa đ\xeam",noon:"tr",morning:"sg",afternoon:"ch",evening:"tối",night:"đ\xeam"},abbreviated:{am:"AM",pm:"PM",midnight:"nửa đ\xeam",noon:"trưa",morning:"s\xe1ng",afternoon:"chiều",evening:"tối",night:"đ\xeam"},wide:{am:"SA",pm:"CH",midnight:"nửa đ\xeam",noon:"trưa",morning:"s\xe1ng",afternoon:"chiều",evening:"tối",night:"đ\xeam"}},defaultWidth:"wide",formattingValues:{narrow:{am:"am",pm:"pm",midnight:"nửa đ\xeam",noon:"tr",morning:"sg",afternoon:"ch",evening:"tối",night:"đ\xeam"},abbreviated:{am:"AM",pm:"PM",midnight:"nửa đ\xeam",noon:"trưa",morning:"s\xe1ng",afternoon:"chiều",evening:"tối",night:"đ\xeam"},wide:{am:"SA",pm:"CH",midnight:"nửa đ\xeam",noon:"giữa trưa",morning:"v\xe0o buổi s\xe1ng",afternoon:"v\xe0o buổi chiều",evening:"v\xe0o buổi tối",night:"v\xe0o ban đ\xeam"}},defaultFormattingWidth:"wide"})};var w=r(30182);let j={code:"vi",formatDistance:(e,t,r)=>{let a;let n=f[e];return(a="string"==typeof n?n:1===t?n.one:n.other.replace("{{count}}",String(t)),r?.addSuffix)?r.comparison&&r.comparison>0?a+" nữa":a+" trước":a},formatLong:x,formatRelative:(e,t,r,a)=>b[e],localize:y,match:{ordinalNumber:(0,r(71068).K)({matchPattern:/^(\d+)/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:(0,w.A)({matchPatterns:{narrow:/^(tcn|scn)/i,abbreviated:/^(trước CN|sau CN)/i,wide:/^(trước Công Nguyên|sau Công Nguyên)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^t/i,/^s/i]},defaultParseWidth:"any"}),quarter:(0,w.A)({matchPatterns:{narrow:/^([1234]|i{1,3}v?)/i,abbreviated:/^q([1234]|i{1,3}v?)/i,wide:/^quý ([1234]|i{1,3}v?)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/(1|i)$/i,/(2|ii)$/i,/(3|iii)$/i,/(4|iv)$/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:(0,w.A)({matchPatterns:{narrow:/^(0?[2-9]|10|11|12|0?1)/i,abbreviated:/^thg[ _]?(0?[1-9](?!\d)|10|11|12)/i,wide:/^tháng ?(Một|Hai|Ba|Tư|Năm|Sáu|Bảy|Tám|Chín|Mười|Mười ?Một|Mười ?Hai|0?[1-9](?!\d)|10|11|12)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/0?1$/i,/0?2/i,/3/,/4/,/5/,/6/,/7/,/8/,/9/,/10/,/11/,/12/],abbreviated:[/^thg[ _]?0?1(?!\d)/i,/^thg[ _]?0?2/i,/^thg[ _]?0?3/i,/^thg[ _]?0?4/i,/^thg[ _]?0?5/i,/^thg[ _]?0?6/i,/^thg[ _]?0?7/i,/^thg[ _]?0?8/i,/^thg[ _]?0?9/i,/^thg[ _]?10/i,/^thg[ _]?11/i,/^thg[ _]?12/i],wide:[/^tháng ?(Một|0?1(?!\d))/i,/^tháng ?(Hai|0?2)/i,/^tháng ?(Ba|0?3)/i,/^tháng ?(Tư|0?4)/i,/^tháng ?(Năm|0?5)/i,/^tháng ?(Sáu|0?6)/i,/^tháng ?(Bảy|0?7)/i,/^tháng ?(Tám|0?8)/i,/^tháng ?(Chín|0?9)/i,/^tháng ?(Mười|10)/i,/^tháng ?(Mười ?Một|11)/i,/^tháng ?(Mười ?Hai|12)/i]},defaultParseWidth:"wide"}),day:(0,w.A)({matchPatterns:{narrow:/^(CN|T2|T3|T4|T5|T6|T7)/i,short:/^(CN|Th ?2|Th ?3|Th ?4|Th ?5|Th ?6|Th ?7)/i,abbreviated:/^(CN|Th ?2|Th ?3|Th ?4|Th ?5|Th ?6|Th ?7)/i,wide:/^(Chủ ?Nhật|Chúa ?Nhật|thứ ?Hai|thứ ?Ba|thứ ?Tư|thứ ?Năm|thứ ?Sáu|thứ ?Bảy)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],short:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],abbreviated:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],wide:[/(Chủ|Chúa) ?Nhật/i,/Hai/i,/Ba/i,/Tư/i,/Năm/i,/Sáu/i,/Bảy/i]},defaultParseWidth:"wide"}),dayPeriod:(0,w.A)({matchPatterns:{narrow:/^(a|p|nửa đêm|trưa|(giờ) (sáng|chiều|tối|đêm))/i,abbreviated:/^(am|pm|nửa đêm|trưa|(giờ) (sáng|chiều|tối|đêm))/i,wide:/^(ch[^i]*|sa|nửa đêm|trưa|(giờ) (sáng|chiều|tối|đêm))/i},defaultMatchWidth:"wide",parsePatterns:{any:{am:/^(a|sa)/i,pm:/^(p|ch[^i]*)/i,midnight:/nửa đêm/i,noon:/trưa/i,morning:/sáng/i,afternoon:/chiều/i,evening:/tối/i,night:/^đêm/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}};function N({reviews:e}){return e&&0!==e.length?(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>{var t;return(0,a.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center text-green-600",children:(0,a.jsx)(i.A,{className:"w-4 h-4"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold text-sm text-gray-900",children:e.user_name}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:function(e,t,r){let a,n,i;let s=(0,m.q)(),o=r?.locale??s.locale??h.c,l=u(e,t);if(isNaN(l))throw RangeError("Invalid time value");let f=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:l});l>0?(a=(0,d.a)(t),n=(0,d.a)(e)):(a=(0,d.a)(e),n=(0,d.a)(t));let p=function(e,t,r){var a;return(a=void 0,e=>{let t=(a?Math[a]:Math.trunc)(e);return 0===t?0:t})((+(0,d.a)(e)-+(0,d.a)(t))/1e3)}(n,a),x=Math.round((p-((0,g.G)(n)-(0,g.G)(a))/1e3)/60);if(x<2){if(r?.includeSeconds){if(p<5)return o.formatDistance("lessThanXSeconds",5,f);if(p<10)return o.formatDistance("lessThanXSeconds",10,f);if(p<20)return o.formatDistance("lessThanXSeconds",20,f);else if(p<40)return o.formatDistance("halfAMinute",0,f);else if(p<60)return o.formatDistance("lessThanXMinutes",1,f);else return o.formatDistance("xMinutes",1,f)}return 0===x?o.formatDistance("lessThanXMinutes",1,f):o.formatDistance("xMinutes",x,f)}if(x<45)return o.formatDistance("xMinutes",x,f);if(x<90)return o.formatDistance("aboutXHours",1,f);if(x<c.F6){let e=Math.round(x/60);return o.formatDistance("aboutXHours",e,f)}if(x<2520)return o.formatDistance("xDays",1,f);else if(x<c.Nw){let e=Math.round(x/c.F6);return o.formatDistance("xDays",e,f)}else if(x<2*c.Nw)return i=Math.round(x/c.Nw),o.formatDistance("aboutXMonths",i,f);if((i=function(e,t){let r;let a=(0,d.a)(e),n=(0,d.a)(t),i=u(a,n),s=Math.abs(function(e,t){let r=(0,d.a)(e),a=(0,d.a)(t);return 12*(r.getFullYear()-a.getFullYear())+(r.getMonth()-a.getMonth())}(a,n));if(s<1)r=0;else{1===a.getMonth()&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-i*s);let t=u(a,n)===-i;(function(e){let t=(0,d.a)(e);return+function(e){let t=(0,d.a)(e);return t.setHours(23,59,59,999),t}(t)==+function(e){let t=(0,d.a)(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}(t)})((0,d.a)(e))&&1===s&&1===u(e,n)&&(t=!1),r=i*(s-Number(t))}return 0===r?0:r}(n,a))<12){let e=Math.round(x/c.Nw);return o.formatDistance("xMonths",e,f)}{let e=i%12,t=Math.trunc(i/12);return e<3?o.formatDistance("aboutXYears",t,f):e<9?o.formatDistance("overXYears",t,f):o.formatDistance("almostXYears",t+1,f)}}(t=new Date(e.created_at),(0,l.w)(t,Date.now()),{addSuffix:!0,locale:j})})]})]}),(0,a.jsx)("div",{className:"flex",children:[void 0,void 0,void 0,void 0,void 0].map((t,r)=>(0,a.jsx)(o,{className:`w-4 h-4 ${r<e.rating?"text-yellow-400 fill-yellow-400":"text-gray-200"}`},r))})]}),(0,a.jsx)("p",{className:"text-gray-700 text-sm",children:e.comment})]},e.id)})}):(0,a.jsx)("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-xl border border-dashed border-gray-200",children:(0,a.jsx)("p",{children:"Chưa c\xf3 đ\xe1nh gi\xe1 n\xe0o. H\xe3y l\xe0 người đầu ti\xean!"})})}let _=(0,s.A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var M=r(63213),T=r(85814),R=r.n(T);function E({schoolId:e,onReviewSubmitted:t}){let{user:r,isAuthenticated:i}=(0,M.A)(),[s,l]=(0,n.useState)(5),[d,u]=(0,n.useState)(""),[c,h]=(0,n.useState)(""),[m,g]=(0,n.useState)(!1),[f,p]=(0,n.useState)(""),x=async r=>{if(r.preventDefault(),g(!0),p(""),!c.trim()){p("Vui l\xf2ng nhập t\xean của bạn"),g(!1);return}try{let r=localStorage.getItem("accessToken"),a={"Content-Type":"application/json"};if(r&&(a.Authorization=`Bearer ${r}`),!(await fetch(`http://localhost:8000/api/v1/schools/${e}/reviews`,{method:"POST",headers:a,body:JSON.stringify({rating:s,comment:d,user_name:c})})).ok)throw Error("Failed to submit review");u(""),h(""),l(5),t()}catch(e){console.error(e),p("C\xf3 lỗi xảy ra khi gửi đ\xe1nh gi\xe1. Vui l\xf2ng thử lại.")}finally{g(!1)}};return(0,a.jsxs)("form",{onSubmit:x,className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Viết đ\xe1nh gi\xe1 của bạn"}),f&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-50 text-red-600 text-sm rounded-lg",children:f}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Đ\xe1nh gi\xe1"}),(0,a.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>l(e),className:"focus:outline-none transition-transform hover:scale-110",children:(0,a.jsx)(o,{className:`w-8 h-8 ${e<=s?"text-yellow-400 fill-yellow-400":"text-gray-200"}`})},e))})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xean của bạn"}),!i&&(0,a.jsxs)("p",{className:"text-sm text-gray-500 mb-2",children:[(0,a.jsx)(R(),{href:"/auth/login",className:"text-green-600 hover:text-green-700 underline",children:"Đăng nhập"})," ","để tự động điền th\xf4ng tin"]}),(0,a.jsx)("input",{type:"text",value:c,onChange:e=>h(e.target.value),readOnly:i,className:`w-full px-4 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none ${i?"bg-gray-50 cursor-not-allowed":""}`,placeholder:"Nhập t\xean hiển thị...",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nhận x\xe9t"}),(0,a.jsx)("textarea",{value:d,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none min-h-[100px]",placeholder:"Chia sẻ trải nghiệm của bạn về trường n\xe0y..."})]}),(0,a.jsx)("button",{type:"submit",disabled:m,className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:m?(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_,{className:"w-4 h-4"}),"Gửi đ\xe1nh gi\xe1"]})})]})}function P({schoolId:e,initialReviews:t}){let[r,i]=(0,n.useState)(t),s=async()=>{try{let t=await fetch(`http://localhost:8000/api/v1/schools/${e}/reviews`);if(t.ok){let e=await t.json();i(e)}}catch(e){console.error("Failed to refresh reviews:",e)}};return(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:["Đ\xe1nh gi\xe1 từ cộng đồng (",r.length,")"]}),(0,a.jsx)(N,{reviews:r})]}),(0,a.jsx)("div",{children:(0,a.jsx)(E,{schoolId:e,onReviewSubmitted:s})})]})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5364:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,85814,23)),Promise.resolve().then(r.bind(r,871))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29332:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,4536,23)),Promise.resolve().then(r.bind(r,37781))},33873:e=>{"use strict";e.exports=require("path")},37781:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"M:\\\\MNM\\\\2025\\\\GreenEduMap-DTUDZ\\\\modules\\\\web-app\\\\src\\\\components\\\\reviews\\\\SchoolReviews.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"M:\\MNM\\2025\\GreenEduMap-DTUDZ\\modules\\web-app\\src\\components\\reviews\\SchoolReviews.tsx","default")},48976:(e,t,r)=>{"use strict";function a(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"forbidden",{enumerable:!0,get:function(){return a}}),r(8704).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},58869:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(62688).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},62765:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return n}});let a=""+r(8704).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function n(){let e=Object.defineProperty(Error(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw e.digest=a,e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70899:(e,t,r)=>{"use strict";function a(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unauthorized",{enumerable:!0,get:function(){return a}}),r(8704).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},71042:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,s.isNextRouterError)(t)||(0,i.isBailoutToCSRError)(t)||(0,l.isDynamicServerError)(t)||(0,o.isDynamicPostpone)(t)||(0,n.isPostpone)(t)||(0,a.isHangingPromiseRejectionError)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let a=r(68388),n=r(52637),i=r(51846),s=r(31162),o=r(84971),l=r(98479);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},77185:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var a=r(37413),n=r(97576),i=r(4536),s=r.n(i),o=r(61120);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,o.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:s,...l},c)=>(0,o.createElement)("svg",{ref:c,...u,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:d("lucide",n),...l},[...s.map(([e,t])=>(0,o.createElement)(e,t)),...Array.isArray(i)?i:[i]])),h=(e,t)=>{let r=(0,o.forwardRef)(({className:r,...a},n)=>(0,o.createElement)(c,{ref:n,iconNode:t,className:d(`lucide-${l(e)}`,r),...a}));return r.displayName=`${e}`,r},m=h("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),g=h("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),f=h("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),p=h("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),x=h("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),b=h("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);var v=r(37781);async function y(e){try{let t=await fetch(`http://api-gateway:8000/api/v1/schools/${e}`,{cache:"no-store"});if(!t.ok){if(404===t.status)return null;throw Error(`Failed to fetch school: ${t.status}`)}return t.json()}catch(e){return console.error("Error fetching school:",e),null}}async function w(e){try{let t=await fetch(`http://api-gateway:8000/api/v1/schools/${e}/reviews`,{cache:"no-store"});if(!t.ok)return[];return t.json()}catch(e){return console.error("Error fetching reviews:",e),[]}}async function j({params:e}){let{id:t}=await e,r=await y(t),i=await w(t);return r||(0,n.notFound)(),(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)(s(),{href:"/schools/map",className:"inline-flex items-center text-sm text-gray-500 hover:text-green-600 mb-6 transition-colors",children:[(0,a.jsx)(m,{className:"w-4 h-4 mr-2"}),"Quay lại bản đồ"]}),(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:r.name}),(0,a.jsxs)("div",{className:"flex items-center text-gray-500",children:[(0,a.jsx)(g,{className:"w-4 h-4 mr-2"}),(0,a.jsx)("span",{children:r.address})]}),(0,a.jsx)("div",{className:"mt-2 inline-flex items-center px-3 py-1 rounded-full bg-blue-50 text-blue-700 text-sm font-medium",children:r.type}),(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:[(0,a.jsx)("div",{className:"flex",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(f,{className:`w-4 h-4 ${t<Math.round(r.average_rating||0)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},t))}),(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 ml-1",children:[r.average_rating?Number(r.average_rating).toFixed(1):"0.0"," (",r.total_reviews||0," đ\xe1nh gi\xe1)"]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center p-4 bg-green-50 rounded-xl border border-green-100 min-w-[120px]",children:[(0,a.jsx)("span",{className:"text-sm text-green-600 font-medium mb-1",children:"Green Score"}),(0,a.jsx)("span",{className:"text-4xl font-bold text-green-700",children:r.green_score}),(0,a.jsx)("div",{className:"flex mt-1",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(p,{className:`w-4 h-4 ${t<r.green_stars?"text-green-500 fill-green-500":"text-gray-300"}`},t))})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(x,{className:"w-5 h-5 text-green-600 mr-2"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Cơ sở vật chất xanh"})]}),r.facilities&&r.facilities.items&&r.facilities.items.length>0?(0,a.jsx)("ul",{className:"space-y-3",children:r.facilities.items.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start",children:[(0,a.jsx)("span",{className:"w-2 h-2 mt-2 rounded-full bg-green-500 mr-3 shrink-0"}),(0,a.jsx)("span",{className:"text-gray-700 capitalize",children:e})]},t))}):(0,a.jsx)("p",{className:"text-gray-500 italic",children:"Chưa c\xf3 th\xf4ng tin về cơ sở vật chất."})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(b,{className:"w-5 h-5 text-blue-600 mr-2"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Kh\xf3a học xanh"})]}),r.green_courses&&r.green_courses.length>0?(0,a.jsx)("div",{className:"space-y-4",children:r.green_courses.map(e=>(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-gray-50 border border-gray-100 hover:border-blue-200 transition-colors",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 mb-1",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-500",children:[(0,a.jsx)("span",{children:e.duration}),(0,a.jsx)("span",{className:"px-2 py-1 rounded bg-white border border-gray-200",children:e.level})]})]},e.id))}):(0,a.jsx)("p",{className:"text-gray-500 italic",children:"Chưa c\xf3 kh\xf3a học xanh n\xe0o."})]})]}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(v.default,{schoolId:t,initialReviews:i})})]})})}},79551:e=>{"use strict";e.exports=require("url")},86897:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getRedirectError:function(){return s},getRedirectStatusCodeFromError:function(){return c},getRedirectTypeFromError:function(){return u},getURLFromRedirectError:function(){return d},permanentRedirect:function(){return l},redirect:function(){return o}});let a=r(52836),n=r(49026),i=r(19121).actionAsyncStorage;function s(e,t,r){void 0===r&&(r=a.RedirectStatusCode.TemporaryRedirect);let i=Object.defineProperty(Error(n.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return i.digest=n.REDIRECT_ERROR_CODE+";"+t+";"+e+";"+r+";",i}function o(e,t){var r;throw null!=t||(t=(null==i?void 0:null==(r=i.getStore())?void 0:r.isAction)?n.RedirectType.push:n.RedirectType.replace),s(e,t,a.RedirectStatusCode.TemporaryRedirect)}function l(e,t){throw void 0===t&&(t=n.RedirectType.replace),s(e,t,a.RedirectStatusCode.PermanentRedirect)}function d(e){return(0,n.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function u(e){if(!(0,n.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return e.digest.split(";",2)[1]}function c(e){if(!(0,n.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},90319:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>h,tree:()=>d});var a=r(65239),n=r(48088),i=r(88170),s=r.n(i),o=r(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d={children:["",{children:["schools",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,77185)),"M:\\MNM\\2025\\GreenEduMap-DTUDZ\\modules\\web-app\\src\\app\\schools\\[id]\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"M:\\MNM\\2025\\GreenEduMap-DTUDZ\\modules\\web-app\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,36074)),"M:\\MNM\\2025\\GreenEduMap-DTUDZ\\modules\\web-app\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,u=["M:\\MNM\\2025\\GreenEduMap-DTUDZ\\modules\\web-app\\src\\app\\schools\\[id]\\page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/schools/[id]/page",pathname:"/schools/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},97576:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return u},RedirectType:function(){return n.RedirectType},forbidden:function(){return s.forbidden},notFound:function(){return i.notFound},permanentRedirect:function(){return a.permanentRedirect},redirect:function(){return a.redirect},unauthorized:function(){return o.unauthorized},unstable_rethrow:function(){return l.unstable_rethrow}});let a=r(86897),n=r(49026),i=r(62765),s=r(48976),o=r(70899),l=r(163);class d extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class u extends URLSearchParams{append(){throw new d}delete(){throw new d}set(){throw new d}sort(){throw new d}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[447,101,743,369],()=>r(90319));module.exports=a})();