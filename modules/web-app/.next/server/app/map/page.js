(()=>{var e={};e.id=823,e.ids=[823],e.modules={3044:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]])},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7569:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},17899:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>c});var a=s(65239),r=s(48088),n=s(88170),l=s.n(n),i=s(30893),d={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(t,d);let c={children:["",{children:["map",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,17925)),"M:\\MNM\\2025\\GreenEduMap-DTUDZ\\modules\\web-app\\src\\app\\map\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"M:\\MNM\\2025\\GreenEduMap-DTUDZ\\modules\\web-app\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,36074)),"M:\\MNM\\2025\\GreenEduMap-DTUDZ\\modules\\web-app\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,o=["M:\\MNM\\2025\\GreenEduMap-DTUDZ\\modules\\web-app\\src\\app\\map\\page.tsx"],x={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/map/page",pathname:"/map",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},17925:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"M:\\\\MNM\\\\2025\\\\GreenEduMap-DTUDZ\\\\modules\\\\web-app\\\\src\\\\app\\\\map\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"M:\\MNM\\2025\\GreenEduMap-DTUDZ\\modules\\web-app\\src\\app\\map\\page.tsx","default")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20996:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]])},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},57664:(e,t,s)=>{Promise.resolve().then(s.bind(s,65682))},60580:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(60687),r=s(85814),n=s.n(r),l=s(43210),i=s(92576),d=s(16189);function c(){let[e,t]=(0,l.useState)(!1),s=(0,d.usePathname)();return(0,a.jsx)(i.P.nav,{initial:{y:-100},animate:{y:0},className:`fixed top-0 left-0 right-0 z-50 transition-all duration-500 ${e||"/"!==s?"bg-white/80 dark:bg-gray-950/80 backdrop-blur-xl shadow-theme-lg border-b border-gray-200/50 dark:border-gray-800/50":"bg-transparent"}`,children:(0,a.jsx)("div",{className:"px-4 mx-auto max-w-7xl sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16 sm:h-20",children:[(0,a.jsx)(n(),{href:"/",className:"flex items-center gap-2",children:(0,a.jsx)(i.P.div,{whileHover:{scale:1.05},children:(0,a.jsx)("img",{src:"/images/logo/logo.svg",alt:"GreenEduMap Logo",className:"h-8 w-auto"})})}),(0,a.jsx)("div",{className:"hidden gap-8 md:flex",children:[{name:"Bản đồ",href:"/map"},{name:"H\xe0nh động xanh",href:"/actions"},{name:"Thống k\xea",href:"/stats"}].map((e,t)=>(0,a.jsxs)(i.P.a,{href:e.href,className:`text-sm font-medium transition-colors relative group ${s===e.href?"text-success-600 dark:text-success-400":"text-gray-700 hover:text-success-600 dark:text-gray-300 dark:hover:text-success-400"}`,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:[e.name,(0,a.jsx)("span",{className:`absolute bottom-0 left-0 h-0.5 bg-gradient-to-r from-success-500 to-success-600 transition-all ${s===e.href?"w-full":"w-0 group-hover:w-full"}`})]},e.name))}),(0,a.jsxs)(i.P.div,{className:"flex items-center gap-3",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:[(0,a.jsx)(n(),{href:"/login",className:"px-4 py-2 text-sm font-medium text-gray-700 transition-all rounded-lg hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800/50",children:"Đăng nhập"}),(0,a.jsx)(n(),{href:"/register",className:"px-4 py-2 text-sm font-medium text-white transition-all rounded-lg bg-gradient-to-r from-success-500 to-success-600 hover:shadow-lg hover:shadow-success-500/50 hover:scale-105",children:"Đăng k\xfd"})]})]})})})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65682:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>T});var a=s(60687),r=s(43210),n=s(60580),l=s(99270),i=s(11860),d=s(92576),c=s(12157),o=s(72789),x=s(15124),m=s(21279),h=s(18171),u=s(32582);function p(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class g extends r.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,s=(0,h.s)(e)&&e.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function f({children:e,isPresent:t,anchorX:s,root:n}){let l=(0,r.useId)(),i=(0,r.useRef)(null),d=(0,r.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,r.useContext)(u.Q),o=function(...e){return r.useCallback(function(...e){return t=>{let s=!1,a=e.map(e=>{let a=p(e,t);return s||"function"!=typeof a||(s=!0),a});if(s)return()=>{for(let t=0;t<a.length;t++){let s=a[t];"function"==typeof s?s():p(e[t],null)}}}}(...e),e)}(i,e?.ref);return(0,r.useInsertionEffect)(()=>{let{width:e,height:a,top:r,left:o,right:x}=d.current;if(t||!i.current||!e||!a)return;let m="left"===s?`left: ${o}`:`right: ${x}`;i.current.dataset.motionPopId=l;let h=document.createElement("style");c&&(h.nonce=c);let u=n??document.head;return u.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${a}px !important;
            ${m}px !important;
            top: ${r}px !important;
          }
        `),()=>{u.contains(h)&&u.removeChild(h)}},[t]),(0,a.jsx)(g,{isPresent:t,childRef:i,sizeRef:d,children:r.cloneElement(e,{ref:o})})}let y=({children:e,initial:t,isPresent:s,onExitComplete:n,custom:l,presenceAffectsLayout:i,mode:d,anchorX:c,root:x})=>{let h=(0,o.M)(b),u=(0,r.useId)(),p=!0,g=(0,r.useMemo)(()=>(p=!1,{id:u,initial:t,isPresent:s,custom:l,onExitComplete:e=>{for(let t of(h.set(e,!0),h.values()))if(!t)return;n&&n()},register:e=>(h.set(e,!1),()=>h.delete(e))}),[s,h,n]);return i&&p&&(g={...g}),(0,r.useMemo)(()=>{h.forEach((e,t)=>h.set(t,!1))},[s]),r.useEffect(()=>{s||h.size||!n||n()},[s]),"popLayout"===d&&(e=(0,a.jsx)(f,{isPresent:s,anchorX:c,root:x,children:e})),(0,a.jsx)(m.t.Provider,{value:g,children:e})};function b(){return new Map}var j=s(86044);let v=e=>e.key||"";function N(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}let k=({children:e,custom:t,initial:s=!0,onExitComplete:n,presenceAffectsLayout:l=!0,mode:i="sync",propagate:d=!1,anchorX:m="left",root:h})=>{let[u,p]=(0,j.xQ)(d),g=(0,r.useMemo)(()=>N(e),[e]),f=d&&!u?[]:g.map(v),b=(0,r.useRef)(!0),k=(0,r.useRef)(g),w=(0,o.M)(()=>new Map),[M,C]=(0,r.useState)(g),[P,A]=(0,r.useState)(g);(0,x.E)(()=>{b.current=!1,k.current=g;for(let e=0;e<P.length;e++){let t=v(P[e]);f.includes(t)?w.delete(t):!0!==w.get(t)&&w.set(t,!1)}},[P,f.length,f.join("-")]);let S=[];if(g!==M){let e=[...g];for(let t=0;t<P.length;t++){let s=P[t],a=v(s);f.includes(a)||(e.splice(t,0,s),S.push(s))}return"wait"===i&&S.length&&(e=S),A(N(e)),C(g),null}let{forceRender:E}=(0,r.useContext)(c.L);return(0,a.jsx)(a.Fragment,{children:P.map(e=>{let r=v(e),c=(!d||!!u)&&(g===P||f.includes(r));return(0,a.jsx)(y,{isPresent:c,initial:(!b.current||!!s)&&void 0,custom:t,presenceAffectsLayout:l,mode:i,root:h,onExitComplete:c?void 0:()=>{if(!w.has(r))return;w.set(r,!0);let e=!0;w.forEach(t=>{t||(e=!1)}),e&&(E?.(),A(k.current),d&&p?.(),n&&n())},anchorX:m,children:e},r)})})};function w({onSearch:e,placeholder:t="T\xecm phường/x\xe3..."}){let[s,n]=(0,r.useState)("");return(0,a.jsx)(d.P.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"absolute top-24 left-96 right-4 z-20",children:(0,a.jsx)("form",{onSubmit:t=>{t.preventDefault(),e(s)},className:"relative",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l.A,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",value:s,onChange:e=>n(e.target.value),placeholder:t,className:"w-full pl-12 pr-12 py-3 bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl border border-gray-200 dark:border-gray-700 rounded-xl shadow-lg focus:outline-none focus:ring-2 focus:ring-success-500 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),(0,a.jsx)(k,{children:s&&(0,a.jsx)(d.P.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},type:"button",onClick:()=>{n(""),e("")},className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:(0,a.jsx)(i.A,{className:"w-4 h-4 text-gray-400"})})})]})})})}var M=s(97992),C=s(20996),P=s(7569),A=s(3044),S=s(7430);function E({ward:e,isOpen:t,onClose:s}){var r,n;return e?(0,a.jsx)(k,{children:t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s,className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-30"}),(0,a.jsx)(d.P.div,{initial:{x:400},animate:{x:0},exit:{x:400},transition:{type:"spring",damping:25,stiffness:200},className:"fixed right-0 top-0 bottom-0 w-96 bg-white dark:bg-gray-900 shadow-2xl z-40 overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Chi tiết khu vực"}),(0,a.jsx)("button",{onClick:s,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:(0,a.jsx)(i.A,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(M.A,{className:"w-5 h-5 text-success-600"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e.ward_name})]}),e.district&&(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 ml-7",children:[e.district,", ",e.city]})]}),(0,a.jsxs)("div",{className:`mb-6 p-6 rounded-xl border-2 ${(r=e.aqi)<=50?"text-green-600 bg-green-50 dark:bg-green-900/20":r<=100?"text-yellow-600 bg-yellow-50 dark:bg-yellow-900/20":r<=150?"text-orange-600 bg-orange-50 dark:bg-orange-900/20":r<=200?"text-red-600 bg-red-50 dark:bg-red-900/20":"text-purple-600 bg-purple-50 dark:bg-purple-900/20"}`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium opacity-75 mb-1",children:"Chỉ số AQI"}),(0,a.jsx)("div",{className:"text-4xl font-bold",children:e.aqi.toFixed(1)})]}),(0,a.jsx)(C.A,{className:"w-12 h-12 opacity-50"})]}),(0,a.jsx)("div",{className:"text-sm font-medium",children:(n=e.aqi)<=50?"Tốt":n<=100?"Trung b\xecnh":n<=150?"Kh\xf4ng tốt cho nh\xf3m nhạy cảm":n<=200?"Kh\xf4ng tốt":"Rất kh\xf4ng tốt"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wide mb-3",children:"Chỉ số chất lượng kh\xf4ng kh\xed"}),(0,a.jsxs)("div",{className:"space-y-3",children:[e.pm25&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(P.A,{className:"w-4 h-4 text-blue-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"PM2.5"})]}),(0,a.jsxs)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[e.pm25.toFixed(1)," μg/m\xb3"]})]}),e.pm10&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(P.A,{className:"w-4 h-4 text-blue-600"}),(0,a.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"PM10"})]}),(0,a.jsxs)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[e.pm10.toFixed(1)," μg/m\xb3"]})]}),e.no2&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(C.A,{className:"w-4 h-4 text-orange-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"NO₂"})]}),(0,a.jsxs)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[e.no2.toFixed(1)," ppb"]})]}),e.o3&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(A.A,{className:"w-4 h-4 text-red-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"O₃"})]}),(0,a.jsxs)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[e.o3.toFixed(1)," ppb"]})]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wide mb-3",children:"Gi\xe1o dục"}),(0,a.jsxs)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(S.A,{className:"w-5 h-5 text-blue-600"}),(0,a.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"Trường học trong khu vực"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dữ liệu đang được cập nhật..."})]})]}),e.latitude&&e.longitude&&(0,a.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Tọa độ"}),(0,a.jsxs)("div",{className:"text-sm font-mono text-gray-900 dark:text-white",children:[e.latitude.toFixed(6),", ",e.longitude.toFixed(6)]})]}),e.measurement_date&&(0,a.jsxs)("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-500",children:["Cập nhật: ",new Date(e.measurement_date).toLocaleString("vi-VN")]})]})})]})}):null}function _(){let e=(0,r.useRef)(null),t=(0,r.useRef)(null),[s,l]=(0,r.useState)(!1),[i,d]=(0,r.useState)("aqi"),[c,o]=(0,r.useState)({trees:!0,schools:!0,solar:!0}),[x,m]=(0,r.useState)(null),[h,u]=(0,r.useState)(!1),[p,g]=(0,r.useState)(""),[f,y]=(0,r.useState)(null),[b,j]=(0,r.useState)(null),[v,N]=(0,r.useState)(null),[k,M]=(0,r.useState)(null),[C,P]=(0,r.useState)(null),[A,S]=(0,r.useState)([]),[_,T]=(0,r.useState)([]),[q,L]=(0,r.useState)([]),[R,D]=(0,r.useState)([]),[z,I]=(0,r.useState)([]);return A.map(e=>({type:"Feature",geometry:{type:"Point",coordinates:[e.longitude,e.latitude]},properties:{value:e.aqi,...e}})),_.map(e=>({type:"Feature",geometry:{type:"Point",coordinates:[e.longitude,e.latitude]},properties:{value:e.temperature,...e}})),(0,a.jsxs)("div",{className:"relative w-full h-screen overflow-hidden",children:[(0,a.jsx)(n.A,{}),(0,a.jsxs)("div",{className:"absolute inset-0 pt-20 sm:pt-24",children:[(0,a.jsx)("div",{ref:e,className:"w-full h-full"}),f&&(0,a.jsxs)("div",{className:"absolute top-28 left-96 p-3 bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl rounded-lg shadow-xl z-20 max-w-xs",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:f.ward_name}),(0,a.jsxs)("div",{className:"text-sm space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"AQI:"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:f.aqi.toFixed(1)})]}),f.district&&(0,a.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:f.district})]})]}),(0,a.jsx)("div",{className:"absolute left-0 top-20 sm:top-24 bottom-0 w-80 bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl shadow-2xl z-10 overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Lớp dữ liệu"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wide mb-3",children:"Heatmap"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-3 p-3 rounded-lg bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer transition-colors",children:[(0,a.jsx)("input",{type:"radio",name:"heatmap",checked:"aqi"===i,onChange:()=>d("aqi"),className:"w-4 h-4 text-success-600 focus:ring-success-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"AQI (Chất lượng kh\xf4ng kh\xed)"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-3 p-3 rounded-lg bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer transition-colors",children:[(0,a.jsx)("input",{type:"radio",name:"heatmap",checked:"temperature"===i,onChange:()=>d("temperature"),className:"w-4 h-4 text-success-600 focus:ring-success-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Nhiệt độ"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wide mb-3",children:"Icon Layers"}),(0,a.jsx)("div",{className:"space-y-2",children:[{key:"trees",label:"C\xe2y xanh"},{key:"schools",label:"Trường học"},{key:"solar",label:"Năng lượng mặt trời"}].map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-3 p-3 rounded-lg bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer transition-colors",children:[(0,a.jsx)("input",{type:"checkbox",checked:c[e.key],onChange:()=>o({...c,[e.key]:!c[e.key]}),className:"w-5 h-5 text-success-600 rounded focus:ring-success-500 focus:ring-2"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.label})]},e.key))})]}),(0,a.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[(0,a.jsxs)("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:["Thang m\xe0u ","aqi"===i?"AQI":"Nhiệt độ"]}),(0,a.jsx)("div",{className:"h-3 w-full rounded-full mb-2",style:{background:"aqi"===i?"linear-gradient(90deg, #22c55e, #eab308, #f97316, #ef4444, #a855f7)":"linear-gradient(90deg, #3b82f6, #fbbf24, #ef4444)"}}),(0,a.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:"aqi"===i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded bg-green-500"}),(0,a.jsx)("span",{children:"Tốt (0-50)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded bg-yellow-500"}),(0,a.jsx)("span",{children:"Trung b\xecnh (51-100)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded bg-orange-500"}),(0,a.jsx)("span",{children:"Kh\xf4ng tốt (101-150)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded bg-red-500"}),(0,a.jsx)("span",{children:"\xd4 nhiễm (151-200)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded bg-purple-500"}),(0,a.jsx)("span",{children:"Rất \xf4 nhiễm (>200)"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded bg-blue-500"}),(0,a.jsx)("span",{children:"M\xe1t (25-28\xb0C)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded bg-yellow-500"}),(0,a.jsx)("span",{children:"Ấm (29-32\xb0C)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded bg-red-500"}),(0,a.jsx)("span",{children:"N\xf3ng (>32\xb0C)"})]})]})})]})]})}),(0,a.jsx)(w,{onSearch:e=>{g(e);let s=t.current;if(!s||!e.trim())return;let a=e.toLowerCase(),r=A.find(e=>e.ward_name?.toLowerCase().includes(a)||e.district?.toLowerCase().includes(a))||q.find(e=>e.name?.toLowerCase().includes(a)||e.district?.toLowerCase().includes(a))||R.find(e=>e.name?.toLowerCase().includes(a)||e.address?.toLowerCase().includes(a))||z.find(e=>e.name?.toLowerCase().includes(a));if(r&&s){let e=r.latitude,t=r.longitude;e&&t&&s.flyTo({center:[t,e],zoom:14,duration:1500})}}}),(0,a.jsx)(E,{ward:x,isOpen:h,onClose:()=>{u(!1),j(null)}}),b&&!h&&(0,a.jsx)("div",{className:"absolute top-20 sm:top-24 right-0 bottom-0 w-80 bg-white dark:bg-gray-900 shadow-2xl z-40 overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:b.title}),(0,a.jsx)("button",{onClick:()=>j(null),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400","aria-label":"Đ\xf3ng",children:"\xd7"})]}),(0,a.jsx)("div",{className:"p-4 bg-success-50 dark:bg-success-900/20 rounded-lg",children:(0,a.jsx)("p",{className:"text-gray-900 dark:text-white",children:b.content})})]})})]})]})}function T(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Đang tải bản đồ..."})}),children:(0,a.jsx)(_,{})})}s(88715),s(59939),process.env.NEXT_PUBLIC_MAPTILER_API_KEY,process.env.NEXT_PUBLIC_API_URL},79551:e=>{"use strict";e.exports=require("url")},94112:(e,t,s)=>{Promise.resolve().then(s.bind(s,17925))},99270:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[447,101,576,347,369],()=>s(17899));module.exports=a})();